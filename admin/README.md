# Admin Panel

React 19 SPA hosted on S3 + CloudFront. Control panel for agency owners and tenant admins.

## Stack

- **React 19** + **Vite 7** + **TypeScript 5.9**
- **shadcn/ui** (Radix primitives: Dialog, Select, Dropdown, Label, Slot)
- **Tailwind CSS v4** + `tailwindcss-animate` + `@tailwindcss/typography`
- **Tiptap 3** block editor with 19 custom plugins from `@amodx/plugins/admin`
- **React Router 7** — 39 pages
- **AWS Amplify 6** — Cognito SRP auth
- **React Flow + Dagre** — content graph visualization
- **lucide-react** — icons

## Auth Flow

1. User signs in via Cognito (SRP flow through Amplify)
2. Every API request sends: `Authorization: Bearer <ID_Token>`, `x-tenant-id: <selected_tenant>`
3. Tenant context stored in localStorage (`AMODX_TENANT_ID`), full reload on tenant switch

## Pages (39)

Content: ContentList, ContentEditor, Audit, Comments, Resources, Context, Assets
Commerce: Products, ProductEditor, DigitalProducts, DigitalProductEditor, Categories, CategoryEditor, Orders, OrderDetail, Customers, CustomerDetail, Coupons, CouponEditor, Reviews, DeliverySettings, OrderEmails, Reports
Engagement: Popups, PopupEditor, Forms, FormEditor, FormSubmissions
Growth: Leads, Signals
System: Settings, Labels, Users, Themes

## Editor

Tiptap block editor in `src/components/editor/BlockEditor.tsx`. Extensions loaded from `@amodx/plugins/admin`. Upload function injected for S3 presigned URL flow. Commerce plugins hidden when `commerceEnabled` is false.

## Runtime Config

Reads `config.json` from S3 (generated by CDK `ConfigGenerator`). Contains Cognito pool IDs, API URL, region. No rebuild needed for env changes.

## Commands

```bash
npm run dev    # Vite dev server (port 5173)
npm run build  # Production build → dist/
```
