# AMODX Admin Panel (The Cockpit)

The Admin Panel is a **React 19 (Vite)** SPA hosted on S3 + CloudFront. It is the control plane for Agency Owners.

## üèó Architecture

### 1. Authentication (Agency Level)
*   **Provider:** AWS Cognito (Admin Pool).
*   **Flow:** Secure Remote Password (SRP) via Amplify.
*   **API Security:** Every request sends:
    *   `Authorization: Bearer <ID_Token>`
    *   `x-api-key: web-client` (Dummy key to satisfy Gateway checks)
    *   `x-tenant-id: <Selected_Tenant_ID>`

### 2. Tenant Context
The app wraps everything in a `TenantProvider`.
*   **State:** Reads/Writes `AMODX_TENANT_ID` to LocalStorage.
*   **Switching:** Reloads the window to ensure clean state when switching clients.

### 3. The Block Editor
We use **Tiptap** with a custom Plugin Architecture.
*   **Location:** `src/components/editor/BlockEditor.tsx`.
*   **Extensions:** Loaded dynamically from `@amodx/plugins`.
*   **Uploads:** We inject a custom `uploadFn` into the editor instance that handles the S3 Presigned URL flow (`POST /assets`).

## üõ† Configuration
The app reads runtime config from `config.json` (generated by CDK) to avoid rebuilding for env var changes.
